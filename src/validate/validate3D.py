from shapely import wkt
from shapely.validation import explain_validity
from shapely import make_valid


# geom = wkt.loads('''MULTIPOLYGON Z (
#   ((1736.596 959.587 143.033, 1736.596 1165.064 143.033, 1988.506 1165.064 143.033, 1988.506 959.587 143.033, 1736.596 959.587 143.033)),
#   ((1736.596 959.587 79.548, 1988.506 959.587 79.548, 1988.506 1165.064 79.548, 1736.596 1165.064 79.548, 1736.596 959.587 79.548)),
#   ((1736.596 959.587 143.033, 1988.506 959.587 143.033, 1988.506 959.587 79.548, 1736.596 959.587 79.548, 1736.596 959.587 143.033)),
#   ((1988.506 959.587 143.033, 1988.506 1165.064 143.033, 1988.506 1165.064 79.548, 1988.506 959.587 79.548, 1988.506 959.587 143.033)),
#   ((1988.506 1165.064 143.033, 1736.596 1165.064 143.033, 1736.596 1165.064 79.548, 1988.506 1165.064 79.548, 1988.506 1165.064 143.033)),
#   ((1736.596 1165.064 143.033, 1736.596 959.587 143.033, 1736.596 959.587 79.548, 1736.596 1165.064 79.548, 1736.596 1165.064 143.033))
# )''')

geom = wkt.loads('''MULTIPOLYGON Z (
  ((1736.596 959.587 143.033, 1736.596 1165.064 143.033, 1988.506 1165.064 143.033, 1988.506 959.587 143.033, 1736.596 959.587 143.033)),
  ((1736.596 959.587 79.548, 1988.506 959.587 79.548, 1988.506 1165.064 79.548, 1736.596 1165.064 79.548, 1736.596 959.587 79.548))
)''')

# geom = wkt.loads('''MULTIPOLYGON Z (
#     ((0 0 10, 5 0 10, 5 5 10, 0 5 10, 0 0 10)),
#     ((5 5 20, 10 5 20, 10 10 20, 5 10 20, 5 5 20)))
# ''')

#valid_geom = make_valid(geom)


print(geom.is_valid)  # 输出 False
print(explain_validity(geom))  # 显示详细错误